import os
import sys
import time
from datetime import datetime
import pickle

total_quartos = {'Standard': 10, 'Premium': 5, 'Luxo': 3}

reservas = []
total_reservas = 0
maior_reservas = 0
nome_reserva_cara = ""
nome_tempo_maior = ""
maior_tempo = 0
nome_arquivo = "reservas.pkl"
quartos_consumidos = 0
nome = ''
agenda_telefonica = {"joao": 2345678, "Maria": 345678}

def mostrar_menu():
    print("         1 - Cadastrar nova reserva")
    print("         2 - Listar Reservas")
    print("         3 - Calcular Estatistícas")
    print("         4 - Cancelar Reserva")
    print("         5 - Consultar Disponibilidade")
    print("         6 - Salvar Dados")
    print("         7 - Carregar Dados")
    print("         8 - Sair")

def cadastrar_reserva():
    print("Vamos cadastrar sua nova reserva...")
def listar_reservas():
    print("Vamos listar as reservas existentes...")
def calcular_stats():
    print("Vamos calcular as estatistícas...")
def consultar_disponibilidade(checkin, checkout, tipo_quarto, quantidade_quartos):
    print("Iremos consultar as disponibilidades...")
    for r in reservas:
        if r['tipo_quarto'] == tipo_quarto:
            if checkin < r['checkout'] and checkout > r['checkin']:
                quartos_consumidos += r['quantidade_quartos']
def cancelar_reserva():
    print("Ok, iremos cancelar sua reserva...")
def salvar_dados():
    with open(nome_arquivo, "wb") as f:
        pickle.dump(agenda_telefonica, f)
def carregar_dados():
    with open(nome_arquivo, "r") as f:
        dados_carregados = pickle.load(f)
        return dados_carregados
def sair():
    print("Ok, muito obrigado por visitar nosso site!")
def nome_responsavel():
    print("")

def check():
    formato = "%d/%m/%Y"
    check_in = input("Digite a data de Check-In (No modelo dd/mm/aaaa): ")
    check_in = datetime.strptime(check_in, formato).date()
    check_out = input("Digite a data de Check-Out (No modelo dd/mm/aaaa): ")
    check_out = datetime.strptime(check_out, formato).date()

def quartos():
    print("Abaixo, estarão listados os quartos disponíveis")
    print(".............")
    print(total_quartos)


def main():
    while True:
        os.system("clear")
        mostrar_menu()
        print("")
        opcao = int(input("Qual opção deseja: "))
        if opcao == 1:
            cadastrar_reserva()
        elif opcao == 2:
            listar_reservas()
        elif opcao == 3:
            calcular_stats()
        elif opcao == 4:
            cancelar_reserva()
        elif opcao == 5:
            consultar_disponibilidade()
        elif opcao == 6:
            salvar_dados()
        elif opcao == 7:
            carregar_dados()
        elif opcao == 8:
            sair()
            break
        else:
            print("Essa função não existe! Tente novamente.")
            time.sleep(3)
            continue
        time.sleep(2)
        nome_responsavel()
        nome = input("Qual o nome do respónsavel da reserva: ").strip()
        if nome == "":
            print("Nome inválido! Tente novamente.")
            time.sleep(2)
            continue
        check()
        quartos()
        time.sleep(3)

        
main()
